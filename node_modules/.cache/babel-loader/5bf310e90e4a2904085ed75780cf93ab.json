{"ast":null,"code":"function ConfettiGenerator(params) {\n  //////////////\n  // Defaults\n  var appstate = {\n    target: 'confetti-holder',\n    // Id of the canvas\n    max: 80,\n    // Max itens to render\n    size: 1,\n    // prop size\n    animate: true,\n    // Should aniamte?\n    props: ['circle', 'square', 'triangle', 'line'],\n    // Types of confetti\n    colors: [[165, 104, 246], [230, 61, 135], [0, 199, 228], [253, 214, 126]],\n    // Colors to render confetti\n    clock: 25,\n    // Speed of confetti fall\n    interval: null,\n    // Draw interval holder\n    rotate: false,\n    // Whenever to rotate a prop\n    width: window.innerWidth,\n    // canvas width (as int, in px)\n    height: window.innerHeight // canvas height (as int, in px)\n\n  }; //////////////\n  // Setting parameters if received\n\n  if (params) {\n    if (params.target) appstate.target = params.target;\n    if (params.max) appstate.max = params.max;\n    if (params.size) appstate.size = params.size;\n    if (params.animate !== undefined && params.animate !== null) appstate.animate = params.animate;\n    if (params.props) appstate.props = params.props;\n    if (params.colors) appstate.colors = params.colors;\n    if (params.clock) appstate.clock = params.clock;\n    if (params.width) appstate.width = params.width;\n    if (params.height) appstate.height = params.height;\n    if (params.rotate !== undefined && params.rotate !== null) appstate.rotate = params.rotate;\n  } //////////////\n  // Properties\n\n\n  var cv = document.getElementById(appstate.target);\n  var ctx = cv.getContext(\"2d\");\n  var particles = []; //////////////\n  // Random helper (to minimize typing)\n\n  function rand(limit, floor) {\n    if (!limit) limit = 1;\n    var rand = Math.random() * limit;\n    return !floor ? rand : Math.floor(rand);\n  }\n\n  var totalWeight = appstate.props.reduce(function (weight, prop) {\n    return weight + (prop.weight || 1);\n  }, 0);\n\n  function selectProp() {\n    var rand = Math.random() * totalWeight;\n\n    for (var i = 0; i < appstate.props.length; ++i) {\n      var weight = appstate.props[i].weight || 1;\n      if (rand < weight) return i;\n      rand -= weight;\n    }\n  } //////////////\n  // Confetti particle generator\n\n\n  function particleFactory() {\n    var prop = appstate.props[selectProp()];\n    var p = {\n      prop: prop.type ? prop.type : prop,\n      //prop type\n      x: rand(appstate.width),\n      //x-coordinate\n      y: rand(appstate.height),\n      //y-coordinate\n      src: prop.src,\n      radius: rand(4) + 1,\n      //radius\n      size: prop.size,\n      rotate: appstate.rotate,\n      line: Math.floor(rand(65) - 30),\n      // line angle\n      angles: [rand(10, true) + 2, rand(10, true) + 2, rand(10, true) + 2, rand(10, true) + 2],\n      // triangle drawing angles\n      color: appstate.colors[rand(appstate.colors.length, true)],\n      // color\n      rotation: rand(360, true) * Math.PI / 180,\n      speed: rand(appstate.clock / 7) + appstate.clock / 30\n    };\n    return p;\n  } //////////////\n  // Confetti drawing on canvas\n\n\n  function particleDraw(p) {\n    var op = p.radius <= 3 ? 0.4 : 0.8;\n    ctx.fillStyle = ctx.strokeStyle = \"rgba(\" + p.color + \", \" + op + \")\";\n    ctx.beginPath();\n\n    switch (p.prop) {\n      case 'circle':\n        {\n          ctx.moveTo(p.x, p.y);\n          ctx.arc(p.x, p.y, p.radius * appstate.size, 0, Math.PI * 2, true);\n          ctx.fill();\n          break;\n        }\n\n      case 'triangle':\n        {\n          ctx.moveTo(p.x, p.y);\n          ctx.lineTo(p.x + p.angles[0] * appstate.size, p.y + p.angles[1] * appstate.size);\n          ctx.lineTo(p.x + p.angles[2] * appstate.size, p.y + p.angles[3] * appstate.size);\n          ctx.closePath();\n          ctx.fill();\n          break;\n        }\n\n      case 'line':\n        {\n          ctx.moveTo(p.x, p.y);\n          ctx.lineTo(p.x + p.line * appstate.size, p.y + p.radius * 5);\n          ctx.lineWidth = 2 * appstate.size;\n          ctx.stroke();\n          break;\n        }\n\n      case 'square':\n        {\n          ctx.save();\n          ctx.translate(p.x + 15, p.y + 5);\n          ctx.rotate(p.rotation);\n          ctx.fillRect(-15 * appstate.size, -5 * appstate.size, 15 * appstate.size, 5 * appstate.size);\n          ctx.restore();\n          break;\n        }\n\n      case 'svg':\n        {\n          ctx.save();\n          var image = new window.Image();\n          image.src = p.src;\n          var size = p.size || 15;\n          ctx.translate(p.x + size / 2, p.y + size / 2);\n          if (p.rotate) ctx.rotate(p.rotation);\n          ctx.drawImage(image, -(size / 2) * appstate.size, -(size / 2) * appstate.size, size * appstate.size, size * appstate.size);\n          ctx.restore();\n          break;\n        }\n    }\n  } //////////////\n  // Public itens\n  //////////////\n  //////////////\n  // Clean actual state\n\n\n  var _clear = function () {\n    appstate.animate = false;\n    clearInterval(appstate.interval);\n    requestAnimationFrame(function () {\n      ctx.clearRect(0, 0, cv.width, cv.height);\n      var w = cv.width;\n      cv.width = 1;\n      cv.width = w;\n    });\n  }; //////////////\n  // Render confetti on canvas\n\n\n  var _render = function () {\n    //canvas dimensions\n    cv.width = appstate.width;\n    cv.height = appstate.height;\n    particles = [];\n\n    for (var i = 0; i < appstate.max; i++) particles.push(particleFactory());\n\n    function draw() {\n      ctx.clearRect(0, 0, appstate.width, appstate.height);\n\n      for (var i in particles) particleDraw(particles[i]);\n\n      update(); //animation loop\n\n      if (appstate.animate) requestAnimationFrame(draw);\n    }\n\n    function update() {\n      for (var i = 0; i < appstate.max; i++) {\n        var p = particles[i];\n        if (appstate.animate) p.y += p.speed;\n        if (p.rotate) p.rotation += p.speed / 35;\n\n        if (p.speed >= 0 && p.y > appstate.height || p.speed < 0 && p.y < 0) {\n          particles[i] = p;\n          particles[i].x = rand(appstate.width, true);\n          particles[i].y = p.speed >= 0 ? -10 : parseFloat(appstate.height);\n        }\n      }\n    }\n\n    return requestAnimationFrame(draw);\n  };\n\n  return {\n    render: _render,\n    clear: _clear\n  };\n}\n\nexport default ConfettiGenerator;","map":{"version":3,"sources":["/Users/emilychu/Desktop/goodvibes/node_modules/confetti-js/dist/index.es.js"],"names":["ConfettiGenerator","params","appstate","target","max","size","animate","props","colors","clock","interval","rotate","width","window","innerWidth","height","innerHeight","undefined","cv","document","getElementById","ctx","getContext","particles","rand","limit","floor","Math","random","totalWeight","reduce","weight","prop","selectProp","i","length","particleFactory","p","type","x","y","src","radius","line","angles","color","rotation","PI","speed","particleDraw","op","fillStyle","strokeStyle","beginPath","moveTo","arc","fill","lineTo","closePath","lineWidth","stroke","save","translate","fillRect","restore","image","Image","drawImage","_clear","clearInterval","requestAnimationFrame","clearRect","w","_render","push","draw","update","parseFloat","render","clear"],"mappings":"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","sourcesContent":["function ConfettiGenerator(params) {\n  //////////////\n  // Defaults\n  var appstate = {\n    target: 'confetti-holder', // Id of the canvas\n    max: 80, // Max itens to render\n    size: 1, // prop size\n    animate: true, // Should aniamte?\n    props: ['circle', 'square', 'triangle', 'line'], // Types of confetti\n    colors: [[165,104,246],[230,61,135],[0,199,228],[253,214,126]], // Colors to render confetti\n    clock: 25, // Speed of confetti fall\n    interval: null, // Draw interval holder\n    rotate: false, // Whenever to rotate a prop\n    width: window.innerWidth, // canvas width (as int, in px)\n    height: window.innerHeight // canvas height (as int, in px)\n  };\n\n  //////////////\n  // Setting parameters if received\n  if(params) {\n    if(params.target)\n      appstate.target = params.target;\n    if(params.max)\n      appstate.max = params.max;\n    if(params.size)\n      appstate.size = params.size;\n    if(params.animate !== undefined && params.animate !== null)\n      appstate.animate = params.animate;\n    if(params.props)\n      appstate.props = params.props;\n    if(params.colors)\n      appstate.colors = params.colors;\n    if(params.clock)\n      appstate.clock = params.clock;\n    if(params.width)\n      appstate.width = params.width;\n    if(params.height)\n      appstate.height = params.height;\n    if(params.rotate !== undefined && params.rotate !== null)\n      appstate.rotate = params.rotate;\n  }\n\n  //////////////\n  // Properties\n  var cv = document.getElementById(appstate.target);\n  var ctx = cv.getContext(\"2d\");\n  var particles = [];\n\n  //////////////\n  // Random helper (to minimize typing)\n  function rand(limit, floor) {\n    if(!limit) limit = 1;\n    var rand = Math.random() * limit;\n    return !floor ? rand : Math.floor(rand);\n  }\n\n  var totalWeight = appstate.props.reduce(function(weight, prop) {\n    return weight + (prop.weight || 1);\n  }, 0);\n  function selectProp() {\n    var rand = Math.random() * totalWeight;\n    for (var i = 0; i < appstate.props.length; ++i) {\n      var weight = appstate.props[i].weight || 1;\n      if (rand < weight) return i;\n      rand -= weight;\n    }\n  }\n\n  //////////////\n  // Confetti particle generator\n  function particleFactory() {\n    var prop = appstate.props[selectProp()];\n    var p = {\n      prop: prop.type ? prop.type : prop, //prop type\n      x: rand(appstate.width), //x-coordinate\n      y: rand(appstate.height), //y-coordinate\n      src: prop.src,\n      radius: rand(4) + 1, //radius\n      size: prop.size,\n      rotate: appstate.rotate,\n      line: Math.floor(rand(65) - 30), // line angle\n      angles: [rand(10, true) + 2, rand(10, true) + 2, rand(10, true) + 2, rand(10, true) + 2], // triangle drawing angles\n      color: appstate.colors[rand(appstate.colors.length, true)], // color\n      rotation: rand(360, true) * Math.PI/180,\n      speed: rand(appstate.clock / 7) + (appstate.clock / 30)\n    };\n\n    return p;\n  }\n\n  //////////////\n  // Confetti drawing on canvas\n  function particleDraw(p) {\n    var op = (p.radius <= 3) ? 0.4 : 0.8;\n\n    ctx.fillStyle = ctx.strokeStyle = \"rgba(\" + p.color + \", \"+ op +\")\";\n    ctx.beginPath();\n\n    switch(p.prop) {\n      case 'circle':{\n        ctx.moveTo(p.x, p.y);\n        ctx.arc(p.x, p.y, p.radius * appstate.size, 0, Math.PI * 2, true);\n        ctx.fill();\n        break;  \n      }\n      case 'triangle': {\n        ctx.moveTo(p.x, p.y);\n        ctx.lineTo(p.x + (p.angles[0] * appstate.size), p.y + (p.angles[1] * appstate.size));\n        ctx.lineTo(p.x + (p.angles[2] * appstate.size), p.y + (p.angles[3] * appstate.size));\n        ctx.closePath();\n        ctx.fill();\n        break;\n      }\n      case 'line':{\n        ctx.moveTo(p.x, p.y);\n        ctx.lineTo(p.x + (p.line * appstate.size), p.y + (p.radius * 5));\n        ctx.lineWidth = 2 * appstate.size;\n        ctx.stroke();\n        break;\n      }\n      case 'square': {\n        ctx.save();\n        ctx.translate(p.x+15, p.y+5);\n        ctx.rotate(p.rotation);\n        ctx.fillRect(-15 * appstate.size,-5 * appstate.size,15 * appstate.size,5 * appstate.size);\n        ctx.restore();\n        break;\n      }\n      case 'svg': {\n        ctx.save();\n        var image = new window.Image();\n        image.src = p.src;\n        var size = p.size || 15;\n        ctx.translate(p.x + size / 2, p.y + size / 2);\n        if(p.rotate)\n          ctx.rotate(p.rotation);\n        ctx.drawImage(image, -(size/2) * appstate.size, -(size/2) * appstate.size, size * appstate.size, size * appstate.size);\n        ctx.restore();\n        break;\n      }\n    }\n  }\n  \n  //////////////\n  // Public itens\n  //////////////\n\n  //////////////\n  // Clean actual state\n  var _clear = function() {\n    appstate.animate = false;\n    clearInterval(appstate.interval);\n    \n    requestAnimationFrame(function() {\n    \tctx.clearRect(0, 0, cv.width, cv.height);\n      var w = cv.width;\n      cv.width = 1;\n      cv.width = w;\n    });\n  };\n\n  //////////////\n  // Render confetti on canvas\n  var _render = function() {\n      //canvas dimensions\n      cv.width = appstate.width;\n      cv.height = appstate.height;\n      particles = [];\n\n      for(var i = 0; i < appstate.max; i ++)\n        particles.push(particleFactory());\n      \n      function draw(){\n        ctx.clearRect(0, 0, appstate.width, appstate.height);\n\n        for(var i in particles)\n          particleDraw(particles[i]);\n        \n        update();\n\n        //animation loop\n        if(appstate.animate) requestAnimationFrame(draw);\n      }\n\n      function update() {\n\n        for (var i = 0; i < appstate.max; i++) {\n          var p = particles[i];\n          if(appstate.animate)\n            p.y += p.speed;\n\n          if (p.rotate)\n            p.rotation += p.speed / 35;\n          \n          if ((p.speed >= 0 && p.y > appstate.height) || (p.speed < 0 && p.y < 0)) {\n            particles[i] = p; \n            particles[i].x = rand(appstate.width, true);\n            particles[i].y = p.speed >= 0 ? -10 : parseFloat(appstate.height);\n          }\n        }\n      }\n\n      return requestAnimationFrame(draw);\n  };\n\n  return {\n    render: _render,\n    clear: _clear\n  }\n}\n\nexport default ConfettiGenerator;\n"]},"metadata":{},"sourceType":"module"}